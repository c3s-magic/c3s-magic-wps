<namelist>
  <namelist_summary>
    This is an ESMValTool namelist for a Portrait plot.

    It uses the ESGF coupling module to access CMIP5 data in a ESGF archive .

    project=CMIP5, experiment=historical, ensemble=r1i1p1, variable=ta,ua, model=MPI-ESM-LR, time_frequency=mon

    Variables "ta" and "ua", time frequency "mon" are fixed.

    This namelist is generated by copernicus WPS.
  </namelist_summary>

  <%include file="global.xml"/>

  <MODELS>
    <!-- MODELS AND OBSERVATIONS ARE SPECIFIC TO EACH VARIABLE AND DEFINED IN THE DIAG SECTIONS BELOW -->
  </MODELS>

  <DIAGNOSTICS>
    <diag>
        <description>TEMPERATURE: grading precalculations</description>
        <variable_def_dir>${prefix}/variable_defs/</variable_def_dir>
        <variable ref_model="ERA-Interim,NCEP">ta</variable>
        <field_type>T3M</field_type>
        <diag_script_cfg_dir>${prefix}/nml/cfg_lauer17rse/</diag_script_cfg_dir>
        % for model in constraints['models']:
        <model>ESGF_CMIP5 MPI-M output1 MPI-M ${model} ${constraints['experiment']} ${constraints['time_frequency']} atmos ${constraints['cmor_table']} ${constraints['ensemble']} latest ${start_year} ${end_year} CMIP5_template</model>
        % endfor
        <model>  OBS         ERA-Interim         reanaly      1             ${start_year} ${end_year}   ${obs_root}/Tier3/ERA-Interim  </model>
        <model>  OBS         NCEP                reanaly      1             ${start_year} ${end_year}   ${obs_root}/Tier2/NCEP         </model>
        <diag_script cfg="cfg_perfmetrics_grading_RMSD_850_glob.ncl">perfmetrics_main.ncl</diag_script>
        <!-- diag_script cfg="cfg_perfmetrics_grading_RMSD_200_glob.ncl">perfmetrics_main.ncl</diag_script -->
        <diag_script cfg="cfg_perfmetrics_grading_RMSD_850_glob.ncl">perfmetrics_grading.ncl</diag_script>
        <!-- diag_script cfg="cfg_perfmetrics_grading_RMSD_200_glob.ncl">perfmetrics_grading.ncl</diag_script -->
    </diag>

    <diag>
        <description>EASTWARD WIND: grading precalculations</description>
        <variable_def_dir>${prefix}/variable_defs/</variable_def_dir>
        <variable ref_model="ERA-Interim,NCEP">ua</variable>
        <field_type>T3M</field_type>
        <diag_script_cfg_dir>${prefix}/nml/cfg_lauer17rse/</diag_script_cfg_dir>
        % for model in constraints['models']:
        <model>ESGF_CMIP5 MPI-M output1 MPI-M ${model} ${constraints['experiment']} ${constraints['time_frequency']} atmos ${constraints['cmor_table']} ${constraints['ensemble']} latest ${start_year} ${end_year} CMIP5_template</model>
        % endfor
        <model>  OBS         ERA-Interim         reanaly      1             ${start_year} ${end_year}   ${obs_root}/Tier3/ERA-Interim  </model>
        <model>  OBS         NCEP                reanaly      1             ${start_year} ${end_year}   ${obs_root}/Tier2/NCEP         </model>
        <diag_script cfg="cfg_perfmetrics_grading_RMSD_850_glob.ncl">perfmetrics_main.ncl</diag_script>
        <diag_script cfg="cfg_perfmetrics_grading_RMSD_850_glob.ncl">perfmetrics_grading.ncl</diag_script>
    </diag>

    <!-- diag>
        <description>COLLECT AND PLOT PREVIOUSLY CALCULATED GRADINGS (Portrait diagram)</description>
        <variable_def_dir>${prefix}/variable_defs/</variable_def_dir>
        <variable>ta</variable>
        <field_type>T3M</field_type>
        <diag_script_cfg_dir>${prefix}/nml/cfg_lauer17rse/</diag_script_cfg_dir>
        % for model in constraints['models']:
        <model>ESGF_CMIP5 MPI-M output1 MPI-M ${model} ${constraints['experiment']} ${constraints['time_frequency']} atmos ${constraints['cmor_table']} ${constraints['ensemble']} latest ${start_year} ${end_year} CMIP5_template</model>
        % endfor
        <diag_script cfg="cfg_perfmetrics_grading_collect.ncl">perfmetrics_grading_collect.ncl</diag_script>
    </diag -->

  </DIAGNOSTICS>

  <ESGF>
    <config_file>${workdir}/esgf_config.xml</config_file>
  </ESGF>

</namelist>
